Создать шаг CH/Compare_Flow_NTC_Temperature_Cold с описанием: Контур Отопление. Сравнение показаний температур холодной воды. шаг c блоком "DB_VI".CH.Compare_Flow_NTC_Temperature_Cold. Так же как обычно подписываемся на End и Error, которые определяют ок шаг или нет. Эти два сигнала в приоритете!. И так же ждём сигнала Ready_1. когда его получаем, то считываем данные из плк: "DB_Measure".Temper.CH_TMR (REAL) и из котла по modbus: "Получение значение температуры в котле с датчика NTC CH" - посмотри в доке. дальше их надо сравнить "DB_Measure".Temper.CH_TMR (REAL) и значение по modbus - получаем "дельта T CH". Если дельта <= ns=3;s="DB_Recipe"."CH"."TFlowDeltaMax" (надо взять из рецептов), то всё ок, сохраняем в результаты TestResultService под именем Delta_CH_Flow_Temp_Cold isRange: true, минимум просто 0 - константа, а максимум ns=3;s="DB_Recipe"."CH"."TFlowDeltaMax". и записываем true в тег плк Сontinua_1 = true. если делать >=
ns=3;s="DB_Recipe"."CH"."TFlowDeltaMax", то записываем результат как nok (пределы теже и isRange тоже) и пишем Fault (сигналы Ready_1, Сontinua_1, Fault плк сбросит сам). всё это время ждём end и error, если они сбрабатывают то ли бо сразу ок в шаге либо не ок. в качестве пределв getlimits "<= 3.0". результат по окончании шага нужно вывести: "Дельта: {дельта T CH}, TMR (из ПЛК): {"DB_Measure".Temper.CH_TMR}, котёл (регистр): {то что считали из Получение значение температуры в котле с датчика NTC CH}