# Руководство по паттернам кнопок

## Цель

Зафиксировать единые правила применения кнопок в HMI-интерфейсе: семантика, блокировки, безопасность и читаемость.

## Базовая семантика `RadzenButton`

| Семантика | `ButtonStyle` | Назначение |
|------|------|------|
| Подтверждение/основное действие | `Primary` | Логин, подтверждение, повтор |
| Вторичное безопасное действие | `Secondary` | Изменение вспомогательных значений |
| Нейтральное действие | `Light` | Отмена, выход, закрытие |
| Опасное действие | `Danger` | Сброс, reset, разрушительная операция |
| Положительный статус | `Success` | Индикация «действие недоступно/ошибок нет» |

## Кнопки главного экрана

### `OperatorInfo` (`Components/Main/OperatorInfo.razor`)

- `Авторизация оператора`: `Primary`, custom background (`#1e5fcf`).
- `Выйти`: `Light`.
- Обе кнопки блокируются по runtime-контексту (`PlcResetCoordinator`, `ErrorCoordinator`, состояние scan/auto-ready).

### `BoilerOrder` (`Components/Main/BoilerOrder.razor`)

- В ручном режиме (`UseMes = false`) показываются:
  - `Изменить`: `Secondary`.
  - `Сброс`: `Danger`.
- Оба действия идут через авторизацию паролем и подтверждение.

### `ErrorResetButton` (`Components/Errors/ErrorResetButton.razor`)

- При наличии сбрасываемых ошибок:
  - `Сброс ошибки`, `Danger`, активна.
- При отсутствии:
  - `Нет ошибок`, `Success`, `Disabled=true`.
- Кнопка крупная (высота `56px`, `min-width:250px`) для уверенного взаимодействия на HMI.

## Правила блокировок и доступности

1. Блокирующее состояние должно идти из runtime-сервисов, а не только из UI-флага.
2. Для действий оператора учитываются как минимум:
   `PlcResetCoordinator.IsActive`, `ErrorCoordinator.CurrentInterrupt`, состояние pre-execution/scan.
3. Если операция потенциально опасна, нужен дополнительный защитный контур:
   пароль, confirm-диалог или оба механизма.

## Типографика и геометрия

1. Кнопки на главном экране должны быть читаемыми с расстояния:
   крупный шрифт (`~1.3rem`) и достаточный padding.
2. Критичные кнопки размещаются в стабильных зонах интерфейса (без «прыжков» layout).
3. Для disabled-состояний важно сохранять явный визуальный статус, а не скрывать кнопку.

## Do

- Использовать `Danger` только для реально опасных/сбрасывающих операций.
- Явно отражать недоступность через `Disabled`.
- Держать логику доступности рядом с runtime-состоянием (service/coordinator).

## Don't

- Не превращать визуальный `Disabled` в единственный барьер для критичных действий.
- Не смешивать нейтральные и опасные действия в одинаковой цветовой семантике.
- Не убирать confirm/password с операций сброса и правки счётчиков.

## Чек-лист ревью кнопок

1. Семантика цвета и `ButtonStyle` соответствует типу действия.
2. Для опасных операций есть минимум один защитный шаг (confirm/password).
3. `Disabled` привязан к runtime-состоянию, а не к локальному декоративному флагу.
4. Текст кнопок однозначно описывает действие.
5. Кнопка не ломает сетку и не ухудшает доступность соседних элементов.
