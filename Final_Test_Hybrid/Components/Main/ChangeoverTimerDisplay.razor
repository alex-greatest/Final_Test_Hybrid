@implements IDisposable
@inject BoilerState BoilerState

<RadzenCard Class="rz-p-2" Style="background-color: #e0e0e0; min-width: 220px;">
    <RadzenStack Gap="10" AlignItems="AlignItems.Center">
        <RadzenText Style="font-size: 1.8rem; color: black">Время переналадки</RadzenText>
        <RadzenText Style="font-size: 1.8rem; color: black; font-weight: 700">@_displayTime</RadzenText>
    </RadzenStack>
</RadzenCard>

@code {
    private string _displayTime = "00:00:00";

    protected override void OnInitialized()
    {
        BoilerState.OnChangeoverTimerTick += OnTimerTick;
    }

    private void OnTimerTick()
    {
        _displayTime = BoilerState.GetChangeoverDurationFormatted();
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        BoilerState.OnChangeoverTimerTick -= OnTimerTick;
    }
}
